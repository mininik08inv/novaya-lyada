{% extends 'base.html' %}
{% load static %}

{% block content %}
<div class="container py-5">
    <div class="row">
        <div class="col-lg-8">
            <div class="card border-0 shadow-sm mb-4">
                {% if ad.image %}
                <img src="{{ ad.image.url }}" class="card-img-top" alt="{{ ad.title }}">
                {% endif %}
                <div class="card-body">
                    <h1 class="h2 card-title mb-3">{{ ad.title }}</h1>
                    <div class="d-flex justify-content-between align-items-center text-muted mb-2">
                        <small>Опубликовано: {{ ad.created|date:"d.m.Y H:i" }}</small>
                        <small>Цена: {{ ad.price|default:"—" }}</small>
                    </div>
                    <div class="text-muted mb-3">
                        {% if ad.category %}<span class="badge bg-primary">{{ ad.category.name }}</span>{% endif %}
                        {% if ad.dedline_publish %}<small class="ml-2">до {{ ad.dedline_publish|date:"d.m.Y H:i" }}</small>{% endif %}
                    </div>
                    <div class="card-text">{{ ad.content|linebreaks }}</div>
                </div>
            </div>
        </div>
        <div class="col-lg-4">
            <div class="card border-0 shadow-sm sticky-top" style="top: 20px;">
                <div class="card-body">
                    <h2 class="h5 card-title mb-3">Информация</h2>
                    {% if ad.author %}
                    <p class="mb-2"><strong>Автор:</strong> {{ ad.author.get_full_name|default:ad.author.username }}</p>
                    {% endif %}
                    {% if ad.phone %}<p class="mb-2"><strong>Телефон:</strong> {{ ad.phone }}</p>{% endif %}
                    {% if ad.address %}<p class="mb-2"><strong>Адрес:</strong> {{ ad.address }}</p>{% endif %}
                    <p class="mb-2"><strong>Статус:</strong> {{ ad.get_status_display }}</p>
                    <div class="d-grid gap-2 mt-3">
                        <a href="{% url 'advertisement:advertisement_all' %}" class="btn btn-outline-primary">Все
                            объявления</a>
                        {% if request.user.is_authenticated %}
                        {% if request.user.is_superuser or request.user == ad.author %}
                        <a href="{% url 'advertisement:advertisement_update' ad.slug %}"
                            class="btn btn-primary">Редактировать</a>
                        <a href="{% url 'advertisement:advertisement_delete' ad.slug %}"
                            class="btn btn-danger">Удалить</a>
                        {% endif %}
                        {% endif %}
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
{% endblock %}